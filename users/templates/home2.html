{% block content %}
    <h1>Library</h1>

    <!-- Search button -->
    <button class="btn btn-primary" id="searchByFieldButton">Search by Field</button>

    <!-- Search form (hidden by default) -->
    <form method="get" class="search-form hidden" id="searchForm">
        {{ search_form.as_p }}
        <button type="submit" name="action" value="search" class="btn btn-primary">Search</button>
    </form>

    <hr>

    <!-- Button to display all books -->
    <form method="get">
        <button type="submit" name="action" value="display_all_books" class="btn btn-primary">Display All Books</button>
    </form>

    <hr>

    <!-- Book List -->
    <table class="table">
        <thead>
            <tr>
                <th>ISBN</th>
                <th>Title</th>
                <th>Author</th>
                <th>Publisher</th>
                <th>Publication Date</th>
                <th>Genre</th>
                <th>Copies in Stock</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
                <tr>
                    <td>{{ book.isbn }}</td>
                    <td>{{ book.title }}</td>
                    <td>{{ book.author }}</td>
                    <td>{{ book.publisher }}</td>
                    <td>{{ book.publication_date }}</td>
                    <td>{{ book.genre }}</td>
                    <td>{{ book.copies_in_stock }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Add CSS and JavaScript -->
    <style>
        .hidden {
            display: none;
        }
    </style>

    <script>
        // Toggle visibility of the search form
        document.addEventListener('DOMContentLoaded', function () {
            const searchByFieldButton = document.getElementById('searchByFieldButton');
            const searchForm = document.getElementById('searchForm');

            searchByFieldButton.addEventListener('click', function () {
                searchForm.classList.toggle('hidden');
            });
        });
    </script>
{% endblock %}
