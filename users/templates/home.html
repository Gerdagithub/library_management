{% extends "base.html" %}
{% load static %}
{% block title %}Home - LibSpot{% endblock title %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'css/logo.css' %}">
    {% comment %} <link rel="stylesheet" href="{% static 'css/book-cards' %}"> {% endcomment %}
{% endblock extra_styles %}

{% block content %}
    {% comment %} {% include 'partials/_navbar.html' with genres=genres %} {% endcomment %}

    <div class="d-flex justify-content-center align-items-center m-4">
        <img src="{% static 'images/LibSpot_logo-removebg-preview.png' %}" 
            class="img-fluid logo" alt="Library Management System">
    </div>

    {% include 'partials/_search_home.html' with genres=genres search_form=search_form%}


    {% comment %} <form method="get" class="search-form hidden" id="searchForm">
        {{ search_form.as_p }}
        <button type="submit" name="action" value="search" class="btn btn-primary">Search</button>
    </form>

    <hr>

    <table class="table">
        <thead>
            <tr>
                <th>ISBN</th>
                <th>Title</th>
                <th>Author</th>
                <th>Publisher</th>
                <th>Publication Date</th>
                <th>Genre</th>
                <th>Copies in Stock</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
                <tr>
                    <td>{{ book.isbn }}</td>
                    <td>{{ book.title }}</td>
                    <td>{{ book.author }}</td>
                    <td>{{ book.publisher }}</td>
                    <td>{{ book.publication_date }}</td>
                    <td>{{ book.genre }}</td>
                    <td>{{ book.copies_in_stock }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7">No books found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table> {% endcomment %}


    {% comment %} <form class="d-flex" role="search" method="get" action="/search/">
        <input class="form-control me-2" type="search" name="q" placeholder="Search books..." aria-label="Search">
        <button class="btn btn-outline-light" type="submit">Search</button>
    </form> {% endcomment %}
    
{% endblock content %}



{% comment %} {% block content %}
    <h1>Library</h1>

    <h2>Categories</h2>
    <ul class="genre-list">
        {% for genre in genres %}
            <li>
                <a href="?genre={{ genre }}">{{ genre }}</a>
            </li>
        {% endfor %}
    </ul>

    {% if selected_genre %}
        <h3>Books in Genre: "{{ selected_genre }}"</h3>
        <a href="{% url 'home_page' %}" class="btn btn-secondary">Clear Filter</a>
    {% endif %}

    <hr>

    <button class="btn btn-primary" id="searchByFieldButton">Search by Field</button>

    <form method="get" class="search-form hidden" id="searchForm">
        {{ search_form.as_p }}
        <button type="submit" name="action" value="search" class="btn btn-primary">Search</button>
    </form>

    <hr>

    <table class="table">
        <thead>
            <tr>
                <th>ISBN</th>
                <th>Title</th>
                <th>Author</th>
                <th>Publisher</th>
                <th>Publication Date</th>
                <th>Genre</th>
                <th>Copies in Stock</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
                <tr>
                    <td>{{ book.isbn }}</td>
                    <td>{{ book.title }}</td>
                    <td>{{ book.author }}</td>
                    <td>{{ book.publisher }}</td>
                    <td>{{ book.publication_date }}</td>
                    <td>{{ book.genre }}</td>
                    <td>{{ book.copies_in_stock }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="7">No books found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <style>
        .genre-list {
            list-style: none;
            padding: 0;
        }

        .genre-list li {
            display: inline;
            margin-right: 10px;
        }

        .hidden {
            display: none;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const searchByFieldButton = document.getElementById('searchByFieldButton');
            const searchForm = document.getElementById('searchForm');

            searchByFieldButton.addEventListener('click', function () {
                searchForm.classList.toggle('hidden');
            });
        });
    </script>
{% endblock %} {% endcomment %}
